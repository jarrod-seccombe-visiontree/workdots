# ~/.tmuxinator/eflex-small.yml

name: eflex-small
root: ~/src/eflex/

# Optional tmux socket
# socket_name: foo

# Runs before everything. Use it to start daemons etc.
pre:
  - redis-server /usr/local/etc/redis.conf
  - sudo proftpd

windows:
  - editor:
      panes:
        - vim
  - webApp:
      layout: main-horizontal
      panes:
        - coffee
        - cd webApp && ./run.sh
  - api:
      layout: main-horizontal
      panes:
        - csharp
        - mono --runtime=v4.0 lib/NuGet.exe restore Eflex.sln && cd webApi && xbuild && xsp4
  - mongo:
      layout: main-horizontal
      panes:
        - mongo eflex
        - tail -f /usr/local/var/log/mongodb/mongo.log
  - trigger:
      layout: main-horizontal
      panes:
          - make trigger && cd webApp/public && mkdir -p imagefiles && chmod a+w imagefiles && eVisionTrigger -c localhost -p imagefiles
          -
  - shell:
      layout: main-horizontal
      panes:
        -
        -
